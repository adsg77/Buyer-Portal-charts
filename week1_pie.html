<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        const data = google.visualization.arrayToDataTable([
          ["City", "Count"],
          ["Riyadh", 4],
          ["Jeddah", 6],
          ["Dammam", 8],
          ["Jubail", 2],
          ["Arar", 3],
          ["Other", 2],
        ]);

        // Map each city to a URL
        const links = {
          Riyadh: "https://your-notion-link/riyadh",
          Jeddah: "https://your-notion-link/jeddah",
          Dammam: "https://your-notion-link/dammam",
          Jubail: "https://your-notion-link/jubail",
          Arar: "https://your-notion-link/arar",
          Other: "https://your-notion-link/other",
        };

        const options = {
          title: "Week 1 - Locations",
          is3D: true,
          legend: { position: "right" },
          pieSliceText: "value",
          tooltip: { text: "both" },
          colors: ["#3442E3", "#F97316", "#E3E8FF", "#FED7AA", "#3442E3", "#F97316"], // Manzil style
          chartArea: { width: "80%", height: "80%" },
        };

        const chart = new google.visualization.PieChart(
          document.getElementById("piechart_3d")
        );
        chart.draw(data, options);

        // Make slices clickable
        google.visualization.events.addListener(chart, "select", function () {
          const sel = chart.getSelection();
          if (!sel.length) return;
          const row = sel[0].row;
          const city = data.getValue(row, 0);
          const url = links[city];
          if (url) window.open(url, "_blank"); // open in new tab
        });

        // Redraw on resize (optional)
        window.addEventListener("resize", () => chart.draw(data, options));
      }
    </script>
  </head>
  <body>
    <div id="piechart_3d" style="width: 900px; height: 520px;"></div>
  </body>
</html>
