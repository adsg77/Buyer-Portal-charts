<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!-- Load Rubik font -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@500&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        const data = google.visualization.arrayToDataTable([
          ["City", "Count"],
          ["Riyadh", 4],
          ["Jeddah", 6],
          ["Dammam", 8],
          ["Jubail", 2],
          ["Arar", 3],
          ["Other", 2],
        ]);

        };

        const options = {
          pieHole: 0.5, // donut chart
          backgroundColor: "#191919",
          legend: { position: "bottom", textStyle: { color: "#FFFFFF", fontName: "Rubik", fontSize: 13 } },
          pieSliceText: "percentage",
          pieSliceTextStyle: { fontName: "Rubik", fontSize: 12, color: "#FFFFFF" },
          tooltip: { text: "value" },
          colors: ["#34A853", "#F4B400", "#4285F4", "#FABB05", "#0F9D58", "#AECBFA"],
          chartArea: { width: "70%", height: "70%" }
        };

        const chart = new google.visualization.PieChart(
          document.getElementById("piechart")
        );
        chart.draw(data, options);

        // Add title inside donut
        const textDiv = document.getElementById("chart-title");
        textDiv.innerHTML = "Week 1";

        // Slice click links
        google.visualization.events.addListener(chart, "select", function () {
          const sel = chart.getSelection();
          if (!sel.length) return;
          const row = sel[0].row;
          const city = data.getValue(row, 0);
          const url = links[city];
          if (url) window.open(url, "_blank");
        });

        // Redraw on resize
        window.addEventListener("resize", () => chart.draw(data, options));
      }
    </script>
    <style>
      body {
        background-color: #191919;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        flex-direction: column;
        font-family: 'Rubik', sans-serif;
      }
      #piechart {
        position: relative;
        width: 700px;
        height: 400px;
      }
      #chart-title {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #ffffff;
        font-size: 22px;
        font-weight: 500;
        font-family: 'Rubik', sans-serif;
        pointer-events: none;
      }
      .chart-container {
        position: relative;
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <div class="chart-container">
      <div id="piechart"></div>
      <div id="chart-title"></div>
    </div>
  </body>
</html>

